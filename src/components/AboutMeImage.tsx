import React, { useLayoutEffect, useRef } from "react";
import { gsap } from "gsap";
import MorphSVGPlugin from "gsap/MorphSVGPlugin";
import CustomEase from "gsap/CustomEase";
// 1. Ù¾Ù„Ø§Ú¯ÛŒÙ† Ø±Ø§ Ø±Ø¬ÛŒØ³ØªØ± Ú©Ù†ÛŒØ¯
gsap.registerPlugin(MorphSVGPlugin, CustomEase);
CustomEase.create("expressiveDefault", "M0,0 C0.34, 1.56, 0.64, 1, 1,1");
function AboutMeImage({ id, className }: { id?: string; className?: string }) {
  // 2. Ø§Ø² useRef Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¹Ù†Ø§ØµØ± SVG Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
  const componentRef = useRef<HTMLDivElement>(null);
  const mainPathRef = useRef(null);
  const shape1Ref = useRef<SVGPathElement>(null);
  const shape2Ref = useRef<SVGPathElement>(null);
  const shape3Ref = useRef<SVGPathElement>(null);
  const shape4Ref = useRef<SVGPathElement>(null);
  const shape5Ref = useRef<SVGPathElement>(null);
  const shape6Ref = useRef<SVGPathElement>(null);
  const shape7Ref = useRef<SVGPathElement>(null);
  const shape8Ref = useRef<SVGPathElement>(null);

  useLayoutEffect(() => {
    // 4. Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø±Ø§ Ø¯Ø± useLayoutEffect Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯
    const ctx = gsap.context(() => {
      // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
      gsap.set(mainPathRef.current, {
        transformOrigin: "50% 50%", // Ù†Ù‚Ø·Ù‡ Ú†Ø±Ø®Ø´ Ø±Ø§ Ø¯Ø± Ù…Ø±Ú©Ø² ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯
      });

      // 5. Ø³Ø§Ø®Øª Timeline
      const tl = gsap.timeline({
        repeat: -1, // ØªÚ©Ø±Ø§Ø± Ø¨ÛŒâ€ŒÙ†Ù‡Ø§ÛŒØª
        repeatDelay: 0,
        defaults: {
          duration: 0.8, // Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ù‡Ø± Ù…Ø±Ø­Ù„Ù‡
          ease: "power2.out", // Ù†ÙˆØ¹ Ø­Ø±Ú©Øª
        },
      });

      tl.to(mainPathRef.current, {
        morphSVG: shape2Ref.current,
        rotation: "+=360",
        delay: 0.2,
      })
        .to(mainPathRef.current, {
          morphSVG: shape3Ref.current,
          rotation: "+=360",
          delay: 0.2,
        })
        .to(mainPathRef.current, {
          morphSVG: shape4Ref.current,
          rotation: "+=360",
          delay: 0.2,
        })
        .to(mainPathRef.current, {
          morphSVG: shape5Ref.current,
          rotation: "+=360",
          delay: 0.2,
        })
        .to(mainPathRef.current, {
          morphSVG: shape6Ref.current,
          rotation: "+=360",
          delay: 0.2,
        })
        .to(mainPathRef.current, {
          morphSVG: shape7Ref.current,
          rotation: "+=360",
          delay: 0.2,
        })
        .to(mainPathRef.current, {
          morphSVG: shape8Ref.current,
          rotation: "+=360",
          delay: 0.2,
        })
        .to(mainPathRef.current, {
          morphSVG: shape1Ref.current,
          rotation: "+=360",
          delay: 0.2,
        });
    }, componentRef); // Scope Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø¨Ù‡ Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª

    return () => ctx.revert(); // 6. Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
  }, []);

  return (
    <div
      id={id}
      ref={componentRef}
      style={{ width: "500px", height: "500px" }}
      className={`${className}`}
    >
      <svg viewBox="0 0 100 100">
        {/* 3. Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ Ù‡Ø¯Ù Ø±Ø§ ØªØ¹Ø±ÛŒÙ Ú©Ù†ÛŒØ¯
          Ø§ÛŒÙ†Ù‡Ø§ Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒÛŒ Ù‡Ø³ØªÙ†Ø¯ Ú©Ù‡ Ù…Ø§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒÙ… Ø¨Ù‡ Ø¢Ù†â€ŒÙ‡Ø§ Ù…ÙˆØ±Ù Ú©Ù†ÛŒÙ….
          Ù…Ø§ Ø¢Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø§ display="none" Ù…Ø®ÙÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….
        */}
        <defs>
          {/* Ø´Ú©Ù„ Û±: Ø¯Ø§ÛŒØ±Ù‡ */}
          <path
            ref={shape1Ref}
            d="M60.6287 13.2824C77.134 6.11389 93.8861 22.866 86.7176 39.3713L85.5324 42.1002C83.3438 47.1394 83.3438 52.8606 85.5324 57.8998L86.7176 60.6287C93.8861 77.134 77.134 93.8861 60.6287 86.7176L57.8998 85.5324C52.8606 83.3438 47.1393 83.3438 42.1002 85.5324L39.3712 86.7176C22.866 93.8861 6.11386 77.134 13.2823 60.6287L14.4676 57.8998C16.6561 52.8606 16.6561 47.1394 14.4676 42.1002L13.2823 39.3713C6.11386 22.866 22.866 6.11389 39.3712 13.2824L42.1002 14.4676C47.1393 16.6562 52.8606 16.6562 57.8998 14.4676L60.6287 13.2824Z"
          />
          {/* Ø´Ú©Ù„ Û²: Ù…Ø±Ø¨Ø¹ Ú¯Ø±Ø¯ */}
          <path
            ref={shape2Ref}
            d="M40.7441 11.3883C41.2038 11.0131 41.4336 10.8255 41.6434 10.6671C46.5867 6.93548 53.4132 6.93548 58.3565 10.6671C58.5663 10.8255 58.7962 11.0131 59.2558 11.3883C59.461 11.5558 59.5636 11.6396 59.6651 11.7193C61.9914 13.5471 64.8437 14.5828 67.8033 14.6746C67.9324 14.6786 68.0649 14.6803 68.33 14.6836C68.9239 14.6909 69.2208 14.6946 69.4835 14.7078C75.6744 15.0195 80.9038 19.3976 82.2865 25.4264C82.3452 25.6823 82.4004 25.9734 82.5108 26.5557C82.5601 26.8156 82.5847 26.9455 82.6111 27.0717C83.2156 29.9638 84.7333 32.5864 86.9413 34.5549C87.0376 34.6407 87.1381 34.727 87.3391 34.8995C87.7892 35.286 88.0143 35.4793 88.2071 35.6579C92.7488 39.8671 93.9342 46.5746 91.1093 52.0797C90.9894 52.3134 90.8441 52.5718 90.5536 53.0886C90.4239 53.3193 90.359 53.4347 90.298 53.5482C88.8978 56.1514 88.3708 59.1338 88.7941 62.0578C88.8126 62.1853 88.834 62.3158 88.8767 62.5769C88.9726 63.1617 89.0205 63.4541 89.0531 63.7145C89.8205 69.8517 86.4072 75.7502 80.6965 78.1557C80.4542 78.2578 80.1764 78.3625 79.6209 78.5721C79.3729 78.6657 79.2489 78.7124 79.129 78.7603C76.3793 79.8565 74.0542 81.8031 72.4947 84.3145C72.4266 84.424 72.359 84.5377 72.2236 84.7651C71.9202 85.2746 71.7686 85.5293 71.6257 85.7497C68.2597 90.9432 61.8449 93.2727 55.9205 91.453C55.6691 91.3757 55.3888 91.2779 54.8282 91.0822C54.578 90.9948 54.4529 90.9511 54.3302 90.9108C51.5176 89.9871 48.4823 89.9871 45.6697 90.9108C45.547 90.9511 45.4219 90.9948 45.1717 91.0822C44.6111 91.2779 44.3309 91.3757 44.0794 91.453C38.155 93.2727 31.7402 90.9432 28.3742 85.7497C28.2314 85.5293 28.0797 85.2746 27.7764 84.7651C27.641 84.5377 27.5733 84.424 27.5053 84.3145C25.9458 81.8031 23.6206 79.8565 20.871 78.7603C20.751 78.7124 20.627 78.6657 20.3791 78.5721C19.8235 78.3625 19.5458 78.2578 19.3034 78.1557C13.5927 75.7502 10.1795 69.8517 10.9469 63.7145C10.9794 63.4541 11.0274 63.1617 11.1232 62.5769C11.166 62.3158 11.1874 62.1853 11.2059 62.0578C11.6292 59.1338 11.1021 56.1514 9.70197 53.5482C9.6409 53.4347 9.57606 53.3193 9.44636 53.0886C9.15583 52.5718 9.01056 52.3134 8.89066 52.0797C6.06576 46.5746 7.25117 39.8671 11.7929 35.6579C11.9856 35.4793 12.2107 35.286 12.6609 34.8995C12.8618 34.727 12.9623 34.6407 13.0586 34.5548C15.2667 32.5864 16.7843 29.9638 17.3889 27.0717C17.4152 26.9455 17.4399 26.8156 17.4892 26.5557C17.5995 25.9734 17.6547 25.6823 17.7134 25.4264C19.0961 19.3976 24.3255 15.0195 30.5164 14.7078C30.7792 14.6946 31.0761 14.6909 31.6699 14.6836C31.935 14.6803 32.0676 14.6786 32.1967 14.6746C35.1563 14.5828 38.0085 13.5471 40.3349 11.7193C40.4363 11.6396 40.5389 11.5558 40.7441 11.3883Z"
          />
          {/* Ø´Ú©Ù„ Û³: Ø´Ø¨ÛŒÙ‡ Ù‚Ø·Ø±Ù‡ / Ø³ØªØ§Ø±Ù‡ Ú¯Ø±Ø¯ */}
          <path
            ref={shape3Ref}
            d="M79.7699 20.227C76.645 17.1021 69.5247 18.6473 60.9334 23.6003C58.3607 14.0225 54.4184 7.89475 49.9991 7.89474C45.5798 7.89474 41.6376 14.0221 39.065 23.5994C30.4741 18.6469 23.3543 17.1019 20.2295 20.2267C17.1045 23.3518 18.65 30.4727 23.6038 39.0648C14.024 41.6374 7.89474 45.5801 7.89474 50C7.89474 54.4191 14.0218 58.3612 23.5987 60.9339C18.6446 69.5263 17.0988 76.6476 20.224 79.7728C23.3493 82.8981 30.4711 81.3521 39.0641 76.3974C41.6368 85.9765 45.5793 92.1053 49.999 92.1053C54.4189 92.1053 58.3616 85.9761 60.9342 76.3965C69.5277 81.3517 76.6499 82.898 79.7754 79.7725C82.9005 76.6474 81.3548 69.5263 76.4009 60.934C85.978 58.3614 92.1053 54.4192 92.1053 50C92.1053 45.5801 85.9759 41.6373 76.3958 39.0647C81.3494 30.4728 82.8949 23.352 79.7699 20.227Z"
          />
          <path
            ref={shape4Ref}
            d="M71.3972 71.3972C53.0803 89.714 28.6517 94.983 16.8344 83.1656C5.01704 71.3483 10.286 46.9197 28.6028 28.6028C46.9197 10.286 71.3483 5.01705 83.1656 16.8344C94.9829 28.6517 89.714 53.0803 71.3972 71.3972Z"
          />
          <path
            ref={shape5Ref}
            d="M40.8064 13.0155C46.3404 8.99482 53.834 8.99483 59.368 13.0155L84.9804 31.624C90.5145 35.6447 92.8301 42.7716 90.7163 49.2772L80.9332 79.3864C78.8194 85.8921 72.757 90.2967 65.9165 90.2967H34.2578C27.4174 90.2967 21.355 85.8921 19.2412 79.3864L9.45807 49.2772C7.34427 42.7716 9.65992 35.6447 15.1939 31.624L40.8064 13.0155Z"
          />
          <path
            ref={shape6Ref}
            d="M53.8341 30.7427C59.6156 1.68224 40.3914 1.68224 46.1729 30.7427C40.3914 1.68224 22.6299 9.03769 39.0919 33.6752C22.6299 9.03769 9.03772 22.6298 33.6752 39.0919C9.03772 22.6298 1.68227 40.3913 30.7428 46.1694C1.68227 40.3879 1.68227 59.6121 30.7428 53.8306C1.68227 59.6121 9.0412 77.3702 33.6752 60.9081C9.0412 77.3702 22.6333 90.9623 39.0919 66.3248C22.6299 90.9588 40.3914 98.3143 46.1694 69.2573C40.3879 98.3177 59.6122 98.3177 53.8306 69.2573C59.6122 98.3177 77.3702 90.9588 60.9081 66.3248C77.3702 90.9588 90.9623 77.3667 66.3248 60.9081C90.9588 77.3702 98.3143 59.6086 69.2573 53.8306C98.3178 59.6121 98.3178 40.3879 69.2573 46.1694C98.3178 40.3879 90.9588 22.6298 66.3248 39.0919C90.9588 22.6298 77.3667 9.03769 60.9081 33.6752C77.3702 9.04117 59.6087 1.68571 53.8306 30.7427H53.8341Z"
          />
          <path
            ref={shape7Ref}
            d="M92.1052 53.1579C92.1052 64.9256 92.1052 70.8095 90.2573 75.477C87.5823 82.233 82.233 87.5824 75.4769 90.2573C70.8095 92.1053 64.9256 92.1053 53.1579 92.1053H46.8421C35.0744 92.1053 29.1905 92.1053 24.523 90.2573C17.767 87.5824 12.4176 82.233 9.74271 75.477C7.89473 70.8095 7.89473 64.9256 7.89473 53.1579L7.89473 46.8421C7.89473 35.0744 7.89473 29.1905 9.74272 24.523C12.4176 17.767 17.767 12.4176 24.523 9.74273C29.1905 7.89474 35.0744 7.89474 46.8421 7.89474L53.1579 7.89475C64.9256 7.89475 70.8095 7.89475 75.4769 9.74273C82.233 12.4176 87.5824 17.767 90.2573 24.5231C92.1052 29.1905 92.1052 35.0744 92.1052 46.8421V53.1579Z"
          />
          <path
            ref={shape8Ref}
            d="M43.8749 11.365C46.6476 6.73801 53.3524 6.738 56.125 11.365L59.2431 16.5684C60.8601 19.2668 64.0525 20.5891 67.1039 19.8244L72.988 18.3498C78.2203 17.0386 82.9614 21.7797 81.6502 27.012L80.1756 32.8961C79.4109 35.9475 80.7332 39.1399 83.4316 40.7569L88.635 43.875C93.262 46.6476 93.262 53.3524 88.635 56.1251L83.4316 59.2431C80.7332 60.8601 79.4109 64.0525 80.1756 67.1039L81.6502 72.988C82.9614 78.2204 78.2203 82.9614 72.988 81.6502L67.1039 80.1756C64.0525 79.4109 60.8601 80.7333 59.2431 83.4317L56.1251 88.635C53.3524 93.262 46.6476 93.262 43.8749 88.6351L40.7569 83.4317C39.1399 80.7333 35.9475 79.4109 32.8961 80.1756L27.012 81.6502C21.7797 82.9614 17.0386 78.2204 18.3498 72.9881L19.8244 67.1039C20.5891 64.0525 19.2667 60.8601 16.5683 59.2431L11.365 56.1251C6.73799 53.3524 6.73798 46.6476 11.3649 43.875L16.5683 40.7569C19.2667 39.1399 20.5891 35.9475 19.8244 32.8961L18.3498 27.012C17.0386 21.7797 21.7796 17.0386 27.012 18.3498L32.8961 19.8244C35.9475 20.5891 39.1399 19.2668 40.7569 16.5684L43.8749 11.365Z"
          />
          <clipPath id="myClipMask">
            <path
              ref={mainPathRef}
              d="M60.6287 13.2824C77.134 6.11389 93.8861 22.866 86.7176 39.3713L85.5324 42.1002C83.3438 47.1394 83.3438 52.8606 85.5324 57.8998L86.7176 60.6287C93.8861 77.134 77.134 93.8861 60.6287 86.7176L57.8998 85.5324C52.8606 83.3438 47.1393 83.3438 42.1002 85.5324L39.3712 86.7176C22.866 93.8861 6.11386 77.134 13.2823 60.6287L14.4676 57.8998C16.6561 52.8606 16.6561 47.1394 14.4676 42.1002L13.2823 39.3713C6.11386 22.866 22.866 6.11389 39.3712 13.2824L42.1002 14.4676C47.1393 16.6562 52.8606 16.6562 57.8998 14.4676L60.6287 13.2824Z"
            />
          </clipPath>
        </defs>

        {/* Ø§ÛŒÙ† Ù…Ø³ÛŒØ± Ø§ØµÙ„ÛŒ Ùˆ Ù‚Ø§Ø¨Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡â€ŒÛŒ Ù…Ø§ Ø§Ø³Øª.
          Ù…Ø§ Ø¢Ù† Ø±Ø§ Ø¨Ø§ path-data Ø´Ú©Ù„ Ø§ÙˆÙ„ Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….
        */}
        <image
          href="/Header.jpg" // <-- ğŸ–¼ï¸ Ø¢Ø¯Ø±Ø³ Ø¹Ú©Ø³ Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯
          width="100"
          height="100"
          clipPath="url(#myClipMask)" // <-- Ø¨Ù‡ ID Ú©Ù„ÛŒÙ¾â€ŒÙ¾Ø« Ø§Ø´Ø§Ø±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
        />
      </svg>
    </div>
  );
}

export default AboutMeImage;
